<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0">
	<title>缺课记录</title>
	<link rel="stylesheet" type="text/css" href="css/common.css" />
	<link rel="stylesheet" type="text/css" href="css/swiper-3.4.2.min.css" />
	<link rel="stylesheet" type="text/css" href="iconfont/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="css/commonUI.css" />
	<link rel="stylesheet" type="text/css" href="css/animate.css" />
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<link rel="stylesheet" type="text/css" href="css/simplePagination.css" />
	<link rel="stylesheet" type="text/css" href="css/index1.css" />
	<link rel="stylesheet" type="text/css" href="css/webuploader/webuploader.css" />
	<script src="js/resize.js" type="text/javascript" charset="utf-8"></script>
	<style type="text/css">
		body {
			background-color: #fff;
		}

		.my_course header,
		.my_children header,
		.ditui header {
			margin-top: 0.2rem;
			margin-bottom: 0.15rem;
			font-size: 0.28rem;
			font-weight: 900;
		}

		.ditui li {
			height: 0.9rem;
			line-height: 0.9rem;
			border-bottom: 1px solid #eee;
		}

		.ditui li i {
			float: right;
			font-size: 0.3rem;
		}

		.my_course i {
			float: right;
			font-weight: 100;
		}

		.my_course img {
			width: 4rem;
			display: block;
			margin: auto;
		}

		.my_course li {
			margin-top: 0.2rem;
		}

		.my_children {
			margin-bottom: 0.5rem;
		}

		.my_children ul ul {
			clear: both;
			position: relative;
			/*right: 0.5rem;*/
			width: 7.5rem;
			border-bottom: 1px solid #eee;
			padding: 0 0.2rem;
		}

		.my_children ul ul li {
			text-align: center;
			float: left;
			width: 33.33%;
			padding-bottom: 0.15rem;
			padding-top: 0.2rem;

		}

		.my_children img {
			width: 0.61rem;
			height: 0.61rem;
			border-radius: 0.61rem;

		}

		.my_children button {
			margin-bottom: 0.15rem;
			width: 1.6rem;
			height: 0.55rem;
			border-radius: 0.55rem;
			background-color: #FBD15B;
			border: 0;
		}

		.pre img {
			width: 0.4rem;
			position: absolute;
			top: 0.45rem;
			left: 0.2rem;
			z-index: 222;
		}

		.pre,
		.swiper-container .next {
			display: none;
		}

		.swiper-container .next img {
			z-index: 222;
			width: 0.4rem;
			position: absolute;
			top: 0.45rem;
			right: 0.2rem !important;
		}

		.hadregister {
			background-color: #FDE8AD !important;
		}

		.noregister {
			background-color: #EAEAEA !important;
		}

		.t_card .more {
			display: block;
			position: absolute;
			width: 0.55rem;
			right: 0.2rem;
			bottom: 0.2rem;
		}

		.teacher .tab {
			padding: 0 1.2rem;
		}

		.teacher .tab li {
			width: 33.33%;
		}

		.circle_out {
			width: 5.5rem;
			height: 4.5rem;
			margin: auto;
			border-left: 0.277rem solid #809292;
			border-bottom: 0.277rem solid #809292;
			position: relative;
		}

		.circle1 {
			position: absolute;
			height: 80%;
			width: 1.34rem;
			background-color: red;
			left: 0.47rem;
			bottom: 0;
		}

		.circle2 {
			position: absolute;
			height: 60%;
			width: 1.34rem;
			background-color: #EFB511;
			left: 2.8rem;
			bottom: 0;
		}

		.t {
			position: absolute;
			top: -0.4rem;
			width: 100%;
			text-align: center;
			color: red;
		}

		.b {
			width: 1.9rem;
			left: -0.2rem;
			position: absolute;
			bottom: -0.8rem;
		}

		.content {
			padding-left: 1.5rem;
			margin-top: 0.2rem;
		}

		.queke {
			margin-top: 0.2rem;
			margin-bottom: 0 !important;
		}

		.teacher .main {
			padding: 0;
		}

		.button {
			width: 100%;
			height: 0.6rem;
			border-radius: 0.6rem;
			border: 0;
			background-color: #FBD15B;
			color: white;
			line-height: 0.6rem;
			text-align: center;
			margin: 2.5rem 0;
		}

		.text-kist {
			width: 80%;
			height: 15vh;
			margin: 5% 8%;
			border: 1px solid #999;
			text-align: start;
		}

		.taling {
			position: absolute;
			top: 60%;
			left: 50%;
			-webkit-transform: translate(-50%, 0);
			transform: translate(-50%, 0);
			display: inline-block;
			min-width: 2rem;
			max-width: 4.5rem;
			border-radius: 0.12rem;
			padding: 0.24rem;
			background-color: rgba(0, 0, 0, 0.6);
			color: #fff;
			font-size: 0.3rem;
			text-align: center;
			z-index: 9999;
			opacity: 0;
			/* display: none; */
		}

		.poletext {
			resize: none;
			height: 1.9rem;
			text-align: left;
			text-indent: 2em;
			padding: 0.15rem;
			line-height: 0.45rem;
			box-sizing: border-box;
			width: 80%;
			margin: 5% 10%;
			border: 1px solid #999;
			text-align: start;
		}

		.name-a {
			text-align: center;
		}
		.but{
			width: 100%;
    height: 0.6rem;
    border-radius: 0.6rem;
    border: 0;
    background-color: #FBD15B;
    color: white;
    line-height: 0.6rem;
    text-align: center;
    margin: 2.5rem 0;
		}
		.warp-opact {
            position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 2222;
    background-color: rgba(0, 0, 0, 0.5);
         }
         .artpo{
            z-index: 2222;
    position: absolute;
    width: 5.4rem;
    background-color: #fff;
    border-radius: 0.12rem;
    box-sizing: border-box;
    font-size: 0.28rem;
    background-clip: padding-box;
    top: 50%;
    left: 50%;
    -webkit-transform: translate(-50%, -50%);
    transform: translate(-50%, -50%);
    text-align: center;
         }
         .qx{
            width: 50%;
    float: left;
    border-bottom-left-radius: 0.096rem;
    /* display: none; */
    padding: 0;
    margin: 0;
    line-height: 0.96rem;
    font-size: 0.34rem;
    text-align: center;
    color: #158cfb;
    background-color: #fff;
    cursor: pointer;
    outline: none;
    background-clip: padding-box;
    border: none;
    box-sizing: border-box;
         }
         .qr{
            width: 50%;
    float: left;
    border-bottom-left-radius: 0.096rem;
    /* display: none; */
    padding: 0;
    margin: 0;
    line-height: 0.96rem;
    font-size: 0.34rem;
    text-align: center;
    color: #158cfb;
    background-color: #fff;
    cursor: pointer;
    outline: none;
    background-clip: padding-box;
    border: none;
    box-sizing: border-box;
    border-left: 1px #ccc  solid;
         }
         .ts{
            font-size: 0.32rem;
    line-height: 1.2rem;
    font-weight: bold;
         }
         .but-qx{
             border-top: #ccc 1px solid;
		 }
		 .warp-opact{
			 display: none;
		 }
	</style>
</head>
<div class="name-a">
	您正在为
</div>

<body class="up-page quekele">
	<!-- <div class="t_card animated card1 zoomIn" style="display: none;">
		<div class="name"><p style="font-size: 0.5rem;"></p> <img src="img/bodyBg/defined.jpg" alt="" /></div>
		<div class="tName" style="margin-left: 0.6rem;"></div>
		<div class="tel"></div>
		<img class="more" onclick="goUrl('changeCard.html?type=1')" src="img/moreCards.png"/>
	</div> -->
	<div class="up-page-wrapper teacher">
		<!-- <div class="header">
			<div class="search">
				<img src="img/bodyBg/search@3x.png"/>
				<input type="text" name="search" id="search" value="" placeholder="输入学员姓名"/>
			</div>
		</div> -->
		<!-- <div class="clearfix"></div> -->
		<!-- <div class="main">
			<div class="main_t">
				
				<div class="my_children">
					<ul>
						
					</ul>
					<div class="clearfix"></div>
				</div>
			</div>
		</div> -->
		<!-- <div class="float"></div>-->
		<div class="class_showo" style="left: -7.5rem;">
			<div class="text">
				<textarea name="" id="" cols="30" rows="10" class="poletext"></textarea>
				<!-- <textarea
					style="resize: none;height: 1.9rem;text-align: left;text-indent: 2em;border: 1px solid #eee;padding: 0.15rem;line-height: 0.45rem;box-sizing: border-box;"
					id="text" name="show" rows="" cols="" class="text-kist">

				</textarea> -->

				<div class="swiper-container">
					<div class="swiper-wrapper">
						<div class="swiper-slide" id="modelImg"><img style="width: 1.7rem; height: 1.5rem;" src="img/addImg.png" /></div>
						<!--<div class="swiper-slide">slider1</div>
				    <div class="swiper-slide">slider2</div>
				    <div class="swiper-slide">slider3</div>-->
					</div>
					<div class="pre">
						<img src="img/left@3x.png" />
					</div>
					<div class="next">
						<img src="img/right@3x.png" />
					</div>
				</div>
			</div>

			<!-- pppppppppppppppppppppfffffffffffffffffffff -->
			<div id="renzhen" style="display: flex;width: 80%;margin: 3% 10%;justify-content: space-between;">
				<span>认真听讲</span>
				<div id="" style="display: flex;justify-content: flex-end;">
					<img class="xing" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing" src="img/未评分.png" style="width: 10%;height: 100%;" />
				</div>
			</div>
			<div id="renzhen" style="display: flex;width: 80%;margin: 3% 10%;justify-content: space-between;">
				<span>行为习惯</span>
				<div id="" style="display: flex;justify-content: flex-end;">
					<img class="xing1" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing1" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing1" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing1" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing1" src="img/未评分.png" style="width: 10%;height: 100%;" />
				</div>
			</div>
			<div id="renzhen" style="display: flex;width: 80%;margin: 3% 10%;justify-content: space-between;">
				<span>动手能力</span>
				<div id="" style="display: flex;justify-content: flex-end;">
					<img class="xing2" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing2" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing2" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing2" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing2" src="img/未评分.png" style="width: 10%;height: 100%;" />
				</div>
			</div>
			<div id="renzhen" style="display: flex;width: 80%;margin: 3% 10%;justify-content: space-between;">
				<span>表达能力</span>
				<div id="" style="display: flex;justify-content: flex-end;">
					<img class="xing3" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing3" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing3" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing3" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing3" src="img/未评分.png" style="width: 10%;height: 100%;" />
				</div>

			</div>

			<div id="renzhen" style="display: flex;width: 80%;margin: 3% 10%;justify-content: space-between;">
				<span>积极主动</span>
				<div id="" style="display: flex;justify-content: flex-end;">
					<img class="xing4" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing4" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing4" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing4" src="img/未评分.png" style="width: 10%;height: 100%;" />
					<img class="xing4" src="img/未评分.png" style="width: 10%;height: 100%;" />
				</div>
			</div>
			<!-- <div id="light-pagination" class="pagination"></div> -->
			<div class="but">
				提交
			</div>
			<div class="taling">
				<span>课堂表现的评语不能少于八个字~</span>
			</div>
		</div>

		<div class="warp-opact">
			<div class="artpo">
				<div class="ts">提示</div>
				<p>请确认该学员已补课，提交后将扣除该学员对应课时</p>
				<div class="but-qx">
					<button class="qx">取消</button>
					<button  class="qr">确认</button>
				</div>
			</div>
		</div>
</body>
<script src="js/jquery-1.7.2.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.simplePagination.js" type="text/javascript" charset="utf-8"></script>
<script src="js/swiper-3.4.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/commonUI.js" type="text/javascript" charset="utf-8"></script>
<script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
<script src="css/webuploader/webuploader.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
		$('.but').click(function(){
				
	  })
	var c = 1;
	$(".xing").click(function () {
		//  c++;
		console.log(c++)
	})
	// }
	var d = 1;
	$('.xing1').click(function () {
		// xwxg++;
		console.log(d++)
	})
	var e = 1;
	$('.xing2').click(function () {
		// xwxg++;
		console.log(e++)
	})
	var f = 1;
	$('.xing3').click(function () {
		// xwxg++;
		console.log(e++)
	})
	var g = 1;
	$('.xing4').click(function () {
		// xwxg++;
		console.log(g++)
	})

	// $.ajax({
	//         type:"GET",
	//         url:"http://139.224.133.133:8088/api/tch/v1/getmakeulist",
	//         dataType:"json", 
	//         data:{
	// 			user_id:'25',
	// 		},
	//         success:function(data){
	// 	     console.log(data)
	// 				$(".button").click(function(){
	// 				$.ajax({
	// 					type:"GET",
	// 					url:"http://139.224.133.133:8088/api/tch/v1/addmakeuList",
	// 					dataType:"json",
	// 					data:{

	// 					},
	// 					success:function(data){
	// 						console.log(data)
	// 					}
	// 				})
	// 				// 	for(var i=0; i<data.Data.list.length; i++){
	// 				// 		var teacherid=data.Data.list[i].id	
	// 		        //         // console.log(teacherid)
	// 				// 		if(data.Data.list[i].id===teacherid){
	//                 //           var p= $('textarea').val()
	// 				// 		  console.log(p)
	//                 //           console.log(data.Data.list[i].id)
	// 		        //        	} 

	// 	            //  }
	// 			});
	//         },
	//         error:function(){  
	//         }
	// });


	// 	  $.ajax({
	// 		      type:"GET",
	// 	        url:"http://139.224.133.133:8088/api/tch/v1/getmakeulist",
	// 	        dataType:"json", 
	// 	        data:{
	// 				user_id:'25',
	// 			 },
	//                
	//                 success: function (result) {
	// 	                   console.log(result)
	//             
	//                 }
	//             });

	console.log(localStorage.getItem('id'))
	// console.log(localStorage.getItem('na'))

	console.log(localStorage.getItem('na'))

	var  studet= localStorage.getItem('na')
	console.log(studet)
	$('<span>' + studet + ' 添加课堂表现 </span>').appendTo('.name-a')

	console.log(localStorage.getItem('zhizhao_uid'))

	$(".but").click(function () {
		console.log(localStorage.getItem('na'))
		console.log(localStorage.getItem('id'))
		console.log(localStorage.getItem('te'))
		console.log(localStorage.getItem('zhizhao_uid'))
		console.log(c - 1)
		console.log(d - 1)
		console.log(e - 1)
		console.log(f - 1)
		console.log(g - 1)
		console.log($('.swiper-slide').attr("src"))
		var imglist = $('.swiper-slide').attr("src")
		var user_id = localStorage.getItem('te')
		console.log(user_id)
		var makeuid = localStorage.getItem('id')
		var teacherid = localStorage.getItem('zhizhao_uid')
		var rztj = c - 1
		var xwxg = d - 1
		var pra = e - 1
		var exp = f - 1
		var agg = g - 1
		var prl = ($("textarea").val())
		$.ajax({
			type: "GET",
			url: "http://139.224.133.133:8088/api/tch/v1/addmakeuList",
			//         dataType:"json", 
			data: {
				makeuid: makeuid,
				studen_id: user_id,
				teacherid: teacherid,
				principalsevaluation: prl,
				imglist: imglist,
				listencarefully: rztj,
				behaviorhabit: xwxg,
				practicalability: pra,
				expressivepower: exp,
				aggressiveness: agg,
			},
			success: function (result) {
				console.log(result)
			}
		});
	})

	// $(".btn").click(function () {
	// 	if ($('textarea').val().trim().length <= 8) {
	// 		$('.taling').animate({ opacity: 1 }, 1000)
	// 		time = setTimeout(function () {
	// 			$('.taling').animate({ opacity: 0 }, 1000)
	// 			clearTimeout(time)
	// 		}, 2000)
	// 	}
	// })
	var imgs = document.getElementsByClassName("xing");
	var imgs1 = document.getElementsByClassName("xing1");
	var imgs2 = document.getElementsByClassName("xing2");
	var imgs3 = document.getElementsByClassName("xing3");
	var imgs4 = document.getElementsByClassName("xing4");
	for (var i = 0; i < imgs.length; i++) {
		imgs[i].setAttribute("score", i + 1); //设置分数
		imgs[i].onclick = function () { //点击时调用方法
			var srcEl = event.srcElement; //通过event来获取原元素
			var score = srcEl.getAttribute("score"); //获取分数
			for (var j = 0; j < score; j++) {
				imgs[j].src = "img/已评分.png";
			}
			for (var j = score; j < imgs.length; j++) {
				imgs[j].src = "img/未评分.png";
			}
		}
	};
	for (var i = 0; i < imgs1.length; i++) {
		imgs1[i].setAttribute("score", i + 1); //设置分数
		imgs1[i].onclick = function () { //点击时调用方法
			var srcEl = event.srcElement; //通过event来获取原元素
			var score = srcEl.getAttribute("score"); //获取分数
			for (var j = 0; j < score; j++) {
				imgs1[j].src = "img/已评分.png";
			}
			for (var j = score; j < imgs1.length; j++) {
				imgs1[j].src = "img/未评分.png";
			}
		}
	};
	for (var i = 0; i < imgs2.length; i++) {
		imgs2[i].setAttribute("score", i + 1); //设置分数
		imgs2[i].onclick = function () { //点击时调用方法
			var srcEl = event.srcElement; //通过event来获取原元素
			var score = srcEl.getAttribute("score"); //获取分数
			for (var j = 0; j < score; j++) {
				imgs2[j].src = "img/已评分.png";
			}
			for (var j = score; j < imgs2.length; j++) {
				imgs2[j].src = "img/未评分.png";
			}
		}
	};
	for (var i = 0; i < imgs3.length; i++) {
		imgs3[i].setAttribute("score", i + 1); //设置分数
		imgs3[i].onclick = function () { //点击时调用方法

			var srcEl = event.srcElement; //通过event来获取原元素

			var score = srcEl.getAttribute("score"); //获取分数
			for (var j = 0; j < score; j++) {
				imgs3[j].src = "img/已评分.png";
			}
			for (var j = score; j < imgs3.length; j++) {
				imgs3[j].src = "img/未评分.png";
			}
		}
	};
	for (var i = 0; i < imgs4.length; i++) {
		imgs4[i].setAttribute("score", i + 1); //设置分数
		imgs4[i].onclick = function () { //点击时调用方法

			var srcEl = event.srcElement; //通过event来获取原元素

			var score = srcEl.getAttribute("score"); //获取分数
			for (var j = 0; j < score; j++) {
				imgs4[j].src = "img/已评分.png";
			}
			for (var j = score; j < imgs4.length; j++) {
				imgs4[j].src = "img/未评分.png";
			}
		}
	};
	$('.search img').click(function () {
		pageindex = 1;
		console.log(444)
		showTime();
	})
	$('#search').bind('keyup', function (event) {

		if (event.keyCode == "13") {
			pageindex = 1;
			//回车执行查询
			showTime();
		}
	});
	//	AJAX
	var curriculumid, studentId, classImgLists = ""; //课程ID/学生id
	//、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、
	var mySwiper = new Swiper('.swiper-container', {
		autoplay: 5000, //可选选项，自动滑动
		slidesPerView: 3,
		spaceBetween: 10
	})
	var BASE_URL = window.location.pathname;
	var uploader;
	uploaderInit();
	function uploaderInit() {
		uploader = WebUploader.create({

			// 选完文件后，是否自动上传。
			auto: true,

			// swf文件路径
			swf: BASE_URL + '/css/webuploader/Uploader.swf',

			// 文件接收服务端。
			server: hostAjax + '/api/other/v1/PostFile',

			// 选择文件的按钮。可选。
			// 内部根据当前运行是创建，可能是input元素，也可能是flash.
			pick: {
				id: '#modelImg',
				multiple: true
			},
			// 只允许选择图片文件。
			accept: {
				title: 'Images',
				extensions: '*',
				mimeTypes: 'image/*'
			}
		});
		/* 上传前判断 */
		uploader.on('beforeFileQueued', function (file) {

			progress = 0;
			/* 图片 */
			if ('gif,jpg,jpeg,bmp,png'.indexOf(file.ext.toLowerCase()) == -1) {
				alert('请上传图片文件');
				return false;
			} else {
				/* makeThumb方法生成缩略图获取图片base64 */
				uploader.makeThumb(file, function (error, src) {
					if (error) {
						alert('图片错误');
						return;
					}
					//        this.$refs.cropImg.changeImg(src, this.width, this.height, this.dataId);
				}, 1, 1); /* 缩略图尺寸，大于1为px，0-1之间为百分比 */
			}
			/* 视频 */
			if (this.type == 'video') {
				if ('mp4,webm,m3u8,ogg'.indexOf(file.ext.toLowerCase()) == -1) {
					alert('请上传支持的视频文件');
					return false;
				}
			}
			if (file.size > (3 * 1e8)) {
				alert('文件大小不可超过300M');
				return false;
			}
			/* 裁剪 */
			//    if (this.crop) {
			//      /* makeThumb方法生成缩略图获取图片base64 */
			//      this.uploader.makeThumb(file, (error, src) => {
			//        if (error) {
			//          this.$message('图片错误');
			//          return;
			//        }
			//        this.$refs.cropImg.changeImg(src, this.width, this.height, this.dataId);
			//      }, 1, 1); /* 缩略图尺寸，大于1为px，0-1之间为百分比 */
			//      return false;
			//    }
			//    this.loading = true;

			return true;

		})
		// 当有文件添加进来的时候
		uploader.on('uploadSuccess', function (file, response) {
			if (classImgLists.split("|").length > 9) { //超过之后的判断
				uploader.stop();
				ui.showToast("限制9张,已满！");
				return false;
			}
			try {
				classImgLists += response.Data[0].f_url + "|";
			} catch (e) {
				//TODO handle the exception
			}

			if (classImgLists.split("|").length > 3) {
				$(".pre").show();
				$(".next").show()
			}
			if (classImgLists.split("|").length > 9) {
				$('#modelImg').hide();
			}
			var $li;
			try {
				$li = $(
						'<div class="swiper-slide file-item thumbnail"  ontouchstart="gtouchstart(this)" ontouchmove="gtouchmove(this)" ontouchend="gtouchend(this)" style="background-image: url(' +
						response.Data[0].f_url + ');">' +
						//              '<img  src="'+response.Data[0].f_url+'"/>' +
						'</div>'
					),
					$img = $li.find('img');
			} catch (e) {
				//TODO handle the exception
			}

			// $list为容器jQuery实例
			$('.swiper-wrapper').append($li);
			mySwiper.update();
		});
		// 文件上传过程中创建进度条实时显示。
		uploader.on('uploadProgress', function (file, percentage) {

			var $li = $('#' + file.id),
				$percent = $li.find('.progress span');
			// 避免重复创建
			if (!$percent.length) {
				$percent = $('<p class="progress"><span></span></p>')
					.appendTo($li)
					.find('span');
			}

			$percent.css('width', percentage * 100 + '%');
			progress = parseInt(percentage * 100);
		});

	}
	//////////////////////////////////////////////------------------------------------
	var timeOutEvent = 0; //定时器   
	//开始按   
	function gtouchstart(_this) {
		timeOutEvent = setTimeout(function () {
			longPress(_this);
		}, 1000); //这里设置定时器，定义长按500毫秒触发长按事件，时间可以自己改，个人感觉500毫秒非常合适
		return false;
	};
	//手释放，如果在500毫秒内就释放，则取消长按事件，此时可以执行onclick应该执行的事件   
	function gtouchend(_this) {
		clearTimeout(timeOutEvent); //清除定时器   
		if (timeOutEvent != 0) {
			//这里写要执行的内容（尤如onclick事件）   
		}
		return false;
	};
	//如果手指有移动，则取消所有事件，此时说明用户只是要移动而不是长按   
	function gtouchmove(_this) {
		clearTimeout(timeOutEvent); //清除定时器   
		timeOutEvent = 0;

	};

	//真正长按后应该执行的内容   
	var splitStr = "",
		re, result, pageindex = 1;

	function longPress(_this) {
		timeOutEvent = 0;
		splitStr = $(_this).css("background-image").split('url("')[1].split('")')[0];
		splitStr += "\\|";

		console.log(splitStr)
		//执行长按要执行的内容，如弹出菜单   
		ui.showAlert('是否确认删除该图片', function () { //确认
			$(_this).remove();
			re = new RegExp(splitStr);
			classImgLists = classImgLists.replace(re, "");
		}, function () { //不是默认地址

			return false;
		}, "确定", "取消", "提示");
	}

	function clearFloat() {
		$('.float').hide();
		// $('.class_show').hide();
		classImgLists = "";
		$("textarea").val(" ");
		$(".swiper-wrapper").html('<div class="swiper-slide" id="modelImg"><img src="img/addImg.png"/></div>');
		mySwiper.update();
		uploaderInit();
	}
	showTime();

	function showTime() {

		getAjax(hostAjax + "/api/tch/v1/getabsencerecordlist", {
			user_id: location.href.indexOf("?uid=") > 0 ? location.href.split("?uid=")[1].split("&")[0] : uid,
			pageindex: pageindex,
			pagesize: 10,
			student_name: $("#search").val()
		}, function (data) {
			if (data.Data) {
				if (pageindex == 1 && data.Data.record / 10 > 1) {
					$('#light-pagination').pagination({ //分页
						pages: Math.ceil(data.Data.record / 10),
						cssStyle: 'light-theme',
					});
				}

				var str = "",
					registerStr = "",
					registerClass = "",
					jilustr = "",
					quekelustr = "",
					quekelustr1 = "";
				try {

					for (var i = 0; i < data.Data.list.length; i++) {
						if (data.Data.list[i].makeuplessons == 0) { //未补课
							registerStr = '<button class="register" id="' + data.Data.list[i].studentid +
								'" index="' + data.Data.list[i].curriculumid + '">补课</button>';
						} else {
							registerStr = '<button style="background-color:#eee;" >已补课</button>';
						}
						str += '<li>' +
							'<ul class="ul" id="">' +
							'<li style="width: 10%;"><img index="' + data.Data.list[i].id +
							'" src="img/default_person.png" alt="" /><p></p></li>' +
							'<li style="padding-bottom:0;width: 66.66%;text-align: left;">' + data.Data.list[i]
							.name + '<p>' + data.Data.list[i].dateweek.split(" ")[0] + ' ' + data.Data.list[i]
							.starttime.split(" ")[1] + "-" + data.Data.list[i].endtime.split(" ")[1] +
							'</p></li>' +
							'<li style="width: 23.33%;">' + registerStr + '</li>' +
							'<div class="clearfix"></div>' +
							'</ul>' +
							'</li>';
					}
				} catch (e) {
					$(".my_children").hide();
					//TODO handle the exception
				}

				$(".my_children ul").html(str);
				$(".my_children img").click(function () {
					location.href = "../ditui/studentDetail.html?studentId=" + $(this).attr("index");
				})
			} else {
				ui.showToast('没有缺课的小朋友', 13000);
			}
			$(".register").click(function () { //点击补课按钮
				studentId = $(this).attr('id');
				curriculumid = $(this).attr('index');
				$('.float').show();
				$("textarea").val(" ");
				// $('.class_show').css("left","0.6rem");
				// $('.class_show').show();
			})
		})
	}
	$(".but").click(function () { //
		
		if ($('textarea').val().trim().length <= 8) {

			// ui.showToast('课堂表现的评语不能少于八个字~', 2000);
			$('.taling').animate({
				opacity: 1
			}, 1000)
			time = setTimeout(function () {
				$('.taling').animate({
					opacity: 0
				}, 1000)
				clearTimeout(time)
			}, 2000)
			return false;
		}
		$('.warp-opact').css({"display":'block'})
		// ui.showAlert("请确认该学员已补课，提交后将扣除该学员对应课时", function () {
		// 	getAjax(hostAjax + "/api/tch/v1/addabsencerecords", { //添加学生的课堂表现
		// 		user_id: studentId,
		// 		curriculumid: curriculumid,
		// 		teacherid: location.href.indexOf("?uid=") > 0 ? location.href.split("?uid=")[1]
		// 			.split("&")[0] : uid,
		// 		principalsevaluation: $('textarea').val(),
		// 		imglist: classImgLists.substring(0, classImgLists.length - 1)
		// 	}, function (data) {
		// 		if (data.Code == 200) {
		// 			ui.showToast('提交成功');
		// 			showTime();
		// 			clearFloat();
		// 			$("#" + studentId).find(".register").text("已表扬");
		// 		} else {
		// 			ui.showToast(data.Msg);
		// 		}
		// 	})
		// }, null, "是的", "取消", "提示");
	})
	$(".qx").click(function () {
		$('.warp-opact').css({"display":'none'})
	})
	$(".qr").click(function () {
		$('.warp-opact').css({"display":'none'})
		 window.location.href="./src/Course/buke.html"
	})
	$(".next").click(function () {
		mySwiper.slideNext();
	})
	$(".pre").click(function () {
		mySwiper.slidePrev();
	})

	$('.float').click(function () {


		clearFloat();


	})
</script>

</html>